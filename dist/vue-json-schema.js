!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("vue-json-schema",[],t):"object"==typeof exports?exports["vue-json-schema"]=t():e["vue-json-schema"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=t.props,r=t.slots,a=v.inputswrapper,o={},i=s(o,a),u=[e(a.component,i,r().default)];if(n.field.description){var l=v.legend,p=s(o,l);u.unshift(e(l.component,p,n.field.description))}return e("fieldset",{attrs:{name:n.field.attrs.name}},u)}function o(){for(var e in f)!function(e){f[e]instanceof Array?f[e].forEach(function(t){return h(e,t)}):f[e].typed.forEach(function(t){h(e,{component:t,option:{type:t}})})}(e);v.radiogroup.render=a,v.checkboxgroup.render=a}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.render,a=v[e]?p({},v[e].option):{};delete a.native,v[e]={type:e,component:t,option:n,render:r,defaultOption:a}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{attrs:{}},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=t.option.native?"attrs":"props",s="function"==typeof t.option?p({},n,t.option({vm:e,field:a,item:o})):p({},t.option,{native:void 0},n);return r({},i,p({},t.defaultOption,s))}function u(e){var t=e.vm,n=e.field,r=e.ref,a=n.attrs;a.hasOwnProperty("value")||(a.value=t.data[a.name]);var o=n.hasOwnProperty("items")&&y.includes(a.type)?v[a.type+"group"]||v.defaultGroup:v[a.type]||v.text,i=s(t,o,a,n);return p({ref:r||a.name,element:o,domProps:{},on:{input:function(e){t.data[a.name]=e&&e.target?e.target.value:e,t.$emit("input",t.data)},change:t.changed}},i)}function l(e){e.fields.forEach(function(t){var n=t.attrs;e.data[n.name]=e.value[n.name]||n.value,b.includes(n.type)||"array"!==t.schemaType||(t.isArrayField=!0,Array.isArray(e.data[n.name])||(e.data[n.name]=[]),e.data[n.name]=e.data[n.name].filter(function(n,r){return e.inputValues[g(t,r)]=n,void 0!==n}),t.itemsNum="checkbox"===n.type?t.items.length:t.minItems)}),(0,d.equals)(e.data,e.value)||e.$emit("input",e.data),Object.keys(e.data).forEach(function(t){e.default[t]="object"===c(e.data[t])&&null!==e.data[t]?Object.freeze(e.data[t]):e.data[t]})}Object.defineProperty(t,"__esModule",{value:!0}),t.inputName=t.fieldTypesAsNotArray=t.groupedArrayTypes=t.defineComponent=t.components=t.option=void 0;var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.renderFieldset=a,t.init=o,t.set=i,t.elementOptions=s,t.input=u,t.initFields=l;var d=n(1),f={h1:["title"],p:["description"],div:["error","textgroup","inputswrapper","defaultGroup"],legend:["legend"],fieldset:["radiogroup","checkboxgroup"],form:["form"],input:{typed:["checkbox","color","date","datetime","datetime-local","email","file","hidden","image","month","number","password","radio","range","search","tel","text","time","url","week"]},textarea:["textarea"],select:["select"],option:["option"],label:["label"],button:[{component:"button",option:{type:"submit",label:"Submit"}},{component:"arraybutton",option:{type:"button",label:"Add"}}]},m=t.option={native:!0},v=t.components={},h=t.defineComponent=function(e,t){"object"===(void 0===t?"undefined":c(t))?v[t.component]={component:e,option:p({},m,t.option)}:v[t]={component:e,option:m}},y=t.groupedArrayTypes=["radio","checkbox","input","textarea"],b=t.fieldTypesAsNotArray=["radio","textarea","select"],g=t.inputName=function(e,t){return e.attrs.name+"-"+t}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);return n.length===Object.keys(t).length&&-1===n.findIndex(function(n){return!t.hasOwnProperty(n)||e[n]!==t[n]})}Object.defineProperty(t,"__esModule",{value:!0}),t.equals=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=n(7),s=r(i),u=n(8),l=r(u);t.default={functional:!0,render:function(e,t){var n=t.props,r=n.description,i=n.field,u=n.element,p=n.input,c=t.slots().default||[],d=e(s.default,{props:{text:r||i.description}});if(i.isArrayField){var f=t.props.vm;if("checkbox"===i.attrs.type){if(u.render)return u.render(e,t);var m=p.ref;return[e(l.default,{props:{vm:f,ref:m,field:i,input:p,element:u}},c),d]}var v=Array.apply(null,Array(i.itemsNum)).map(function(t,n){var r=(0,o.inputName)(i,n);return e(l.default,{props:{vm:f,ref:r,field:i,input:p,element:u}},c)}),h=(0,o.elementOptions)(f,o.components.label,{},i),y=o.components.arraybutton,b=a({},(0,o.elementOptions)(f,y,{disabled:i.maxItems<=i.itemsNum},i),{on:{click:function(){i.itemsNum<i.maxItems&&(i.itemsNum++,f.$forceUpdate())}}}),g=y.option.label||y.defaultOption.label,O=e(y.component,b,g);return v.push(e(o.components.label.component,h,[O])),u.render?u.render(e,a({},t,{slots:function(){return{default:v}}}),v):(v.push(d),v)}return u.render?u.render(e,t):[e(u.component,p,c),d]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={functional:!0,render:function(e,t){var n=t.props,a=t.children,o=n.vm,i=n.field,s=n.element,u=[];if(i.label&&!s.option.disableWrappingLabel){var l=(0,r.elementOptions)(o,r.components.label,{},i),p=[];p.push(e("span",{attrs:{"data-required-field":i.attrs.required?"true":"false"}},i.label)),p=p.concat(a),u.push(e(r.components.label.component,l,p))}else u=a;return n.inputWrappingClass?e("div",{class:n.inputWrappingClass},u):u}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FormSchema=t.setComponent=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(5),i=n(1),s=n(0),u=n(6),l=r(u),p=n(11),c=r(p),d=["radio","checkbox","textarea","select"];(0,s.init)();var f=t.setComponent=s.set,m=t.FormSchema={name:"form-schema",props:{schema:{type:[Object,Promise],required:!0},value:{type:Object,default:function(){return{}}},action:{type:String},autocomplete:{type:String},enctype:{type:String,default:"application/x-www-form-urlencoded"},method:{type:String,default:"post"},novalidate:{type:Boolean},inputWrappingClass:{type:String}},data:function(){return{schemaLoaded:{},default:{},fields:[],error:null,data:{},inputValues:{}}},created:function(){this.schema instanceof Promise?this.schema.then(this.init):this.init(this.schema)},render:function(e){var t=this,n=[];if(this.schemaLoaded.title&&n.push(e(s.components.title.component,this.schemaLoaded.title)),this.schemaLoaded.description&&n.push(e(s.components.description.component,this.schemaLoaded.description)),this.error){var r=(0,s.elementOptions)(this,s.components.error);n.push(e(s.components.error.component,r,this.error))}var o=this,i=this.inputWrappingClass,u=this.fields.map(function(t){return e(l.default,{props:{field:t,vm:o,inputWrappingClass:i}})});if(u.length){u.push(e(c.default,this.$slots.default));var p=(0,s.elementOptions)(this,s.components.form,{action:this.action,enctype:this.enctype,method:this.method,autocomplete:this.autocomplete,novalidate:this.novalidate});n.push(e(s.components.form.component,a({ref:"__form",on:{reset:this.reset,submit:function(e){e.stopPropagation(),t.submit(e)},invalid:this.invalid}},p),u))}return e("div",n)},setComponent:f,methods:{init:function(e){this.schemaLoaded=e||{},(0,o.loadFields)(this.schemaLoaded,this.fields),(0,s.initFields)(this),this.data=Object.seal(this.data)},changed:function(){(0,i.equals)(this.data,this.default)||this.$emit("change",this.data)},input:function(e){var t=this.form().elements;if(!t[e])throw new Error("Undefined input reference '"+e+"'");return t[e]},form:function(){return this.$refs.__form},reportValidity:function(){for(var e=this.form().elements,t=!0,n=0;n<e.length;n++)"checkValidity"in e[n]&&(t=t&&e[n].checkValidity());return t},checkValidity:function(){return this.reportValidity()},invalid:function(e){this.$emit("invalid",e)},reset:function(){var e=this;for(var t in this.inputValues)delete this.inputValues[t];this.fields.forEach(function(t){var n=t.attrs;e.$set(e.data,n.name,e.default[n.name]),d.includes(n.type)||"array"!==t.schemaType||e.data[n.name].forEach(function(n,r){e.inputValues[(0,s.inputName)(t,r)]=n})})},submit:function(e){this.checkValidity()&&this.$emit("submit",e)},setErrorMessage:function(e){this.error=e},clearErrorMessage:function(){this.error=null}}};t.default=m},function(e,t,n){"use strict";function r(e,t){t.attrs.value=t.attrs.hasOwnProperty("value")?t.attrs.value:e.default||"",t.schemaType=e.type,t.label=e.title||"",t.description=e.description||"",t.attrs.required=e.required||!1,t.attrs.disabled=e.disabled||!1}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e&&!1!==e.visible)switch(e.type){case"object":for(var r in e.properties){if(e.required){var s=!0,u=!1,l=void 0;try{for(var c,f=e.required[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var m=c.value;e.properties[m].required=!0}}catch(e){u=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}}a(e.properties[r],t,r)}break;case"boolean":t.push(o(e,n));break;case"array":t.push(p(e,n));break;case"integer":case"number":case"string":var v=!0,h=!1,y=void 0;try{for(var b,g=d[Symbol.iterator]();!(v=(b=g.next()).done);v=!0){var O=b.value;if(e.hasOwnProperty(O))return e.items={type:e.type,enum:e[O]},void t.push(p(e,n))}}catch(e){h=!0,y=e}finally{try{!v&&g.return&&g.return()}finally{if(h)throw y}}t.push(i(e,n))}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={attrs:e.attrs||{}};return r(e,n),n.attrs.type||(n.attrs.type="checkbox"),n.attrs.checked=e.checked||!1,t&&(n.attrs.name=t),n}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={attrs:e.attrs||{}};if(e.pattern&&(n.attrs.pattern=e.pattern),e.format)switch(e.format){case"email":n.attrs.type||(n.attrs.type="email");break;case"uri":n.attrs.type||(n.attrs.type="url")}if(!n.attrs.type)switch(e.type){case"number":case"integer":n.attrs.type="number";break;default:n.attrs.type="text"}return r(e,n),t&&(n.attrs.name=t),e.minLength&&(n.attrs.minlength=e.minLength),e.maxLength&&(n.attrs.maxlength=e.maxLength),n}function s(e){return e.map(function(e){return"object"!==(void 0===e?"undefined":c(e))?{value:e,label:e}:e})}function u(e){return e.items.map(function(e){return e.checked?e.value:void 0})}function l(e){var t=e.items.reverse().find(function(e){return e.checked||e.selected});return t?t.value:""}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={attrs:e.attrs||{}};r(e,n),t&&(n.attrs.name=t),n.items=[],n.minItems=parseInt(e.minItems)||1,n.maxItems=parseInt(e.maxItems)||1e3;var a=!0,o=!1,i=void 0;try{e:for(var p,c=d[Symbol.iterator]();!(a=(p=c.next()).done);a=!0){var m=p.value;if(e.hasOwnProperty(m))switch(m){case"enum":n.attrs.type||(n.attrs.type="select"),n.items=s(e[m]);break e;case"oneOf":n.attrs.type="radio",n.attrs.value=n.attrs.value||"",n.items=s(e[m]).map(f(t)),0===n.attrs.value.length&&(n.attrs.value=l(n));break e;case"anyOf":n.attrs.type="checkbox",n.attrs.value=n.attrs.value||[],n.items=s(e[m]).map(f(t)),0===n.attrs.value.length&&(n.attrs.value=u(n));break e}}}catch(e){o=!0,i=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw i}}return n.attrs.type?"select"===n.attrs.type&&(n.attrs.multiple=n.minItems>1,n.attrs.value=n.attrs.value||n.attrs.multiple?[]:"",0===n.attrs.value.length&&(n.attrs.value=n.attrs.multiple?u(n):l(n))):n.attrs.type="text",n}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.setCommonFields=r,t.loadFields=a,t.parseBoolean=o,t.parseString=i,t.parseItems=s,t.arrayValues=u,t.singleValue=l,t.parseArray=p;var d=["anyOf","oneOf","enum"],f=t.setItemName=function(e){return function(t){return t.name||(t.name=e?e+"-":"",t.name+=t.label.replace(/\s+/g,"-")),t}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),s=n(2),u=r(s),l=n(3),p=r(l),c=n(9),d=r(c),f=n(10),m=r(f),v={functional:!0,render:function(e,t){var n=t.props.vm,r=t.props.inputWrappingClass,s=t.props.field,l=s.attrs,c=(0,i.input)({vm:n,field:s}),f=c.element,v=[];switch(l.type){case"textarea":f.option.native&&(delete c.attrs.type,delete c.attrs.value,c.domProps.innerHTML=n.data[l.name]);break;case"radio":if(s.hasOwnProperty("items"))return s.items.forEach(function(t){v.push(e(d.default,{props:{vm:n,field:s,item:t,disableWrappingLabel:!0}}))}),e(u.default,{props:{vm:n,field:s,input:c,element:f}},v);break;case"checkbox":if(s.hasOwnProperty("items"))return s.items.forEach(function(t,r){v.push(e(d.default,{props:{vm:n,item:t,ref:(0,i.inputName)(s,r),field:o({},s,{label:t.label}),checked:n.data[s.attrs.name].includes(t.value)}}))}),e(u.default,{props:{vm:n,field:s,input:c,element:f}},v);break;case"select":var h=[].concat(a(s.items));l.required||h.unshift({label:null,value:""}),c.attrs&&(delete c.attrs.type,delete c.attrs.value,delete c.attrs.native),h.forEach(function(t){v.push(e(m.default,{props:{vm:n,field:s,option:t,disableWrappingLabel:!0}}))})}return e(p.default,{props:{vm:n,field:s,element:f,inputWrappingClass:r}},[e(u.default,{props:{vm:n,field:s,input:c,element:f}},v)])}};t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={functional:!0,render:function(e,t){return t.props.text?e("small",t.props.text):null}}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0);t.default={functional:!0,render:function(e,t){var n,i=t.props.field,s=t.props.input,u=t.props.element,l=t.props.vm,p=t.props.ref,c=i.attrs,d=u.option.native?"attrs":"props",f="checkbox"===c.type?s[d].value:l.inputValues[p];return e(u.component,a({},s,(n={ref:p},r(n,d,a({},s[d],{name:p,value:f})),r(n,"on",{input:function(e){var t=e&&e.target?e.target.value:e;l.inputValues[p]="checkbox"===c.type&&void 0!==l.inputValues[p]?void 0:t;for(var n=[],r=0;r<i.itemsNum;r++){var a=l.inputValues[(0,o.inputName)(i,r)];a&&n.push(a)}l.data[c.name]=n,l.$emit("input",l.data)},change:l.changed}),n)),t.slots().default)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),i=r(o),s=n(3),u=r(s);t.default={functional:!0,render:function(e,t){var n=t.props,r=n.vm,o=n.item,s=n.ref,l=n.field,p=n.inputWrappingClass,c=l.attrs,d=a.components[c.type],f=o.description,m=(0,a.input)({ref:s,vm:r,field:{label:o.label,attrs:{name:o.name||c.name,type:c.type,value:o.value,checked:void 0===t.props.checked?r.data[c.name]instanceof Array?r.data[c.name].includes(o.value):o.value===r.data[c.name]:t.props.checked}}});return e(u.default,{props:{vm:r,field:l,inputWrappingClass:p}},[e(i.default,{props:{vm:r,field:l,input:m,element:d,description:f}})])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={functional:!0,render:function(e,t){var n=t.props,a=n.vm,o=n.option,i=(0,r.input)({vm:a,field:{label:o.label,attrs:{type:void 0,value:o.value,selected:o.selected}}});return e(r.components.option.component,i,o.label)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={functional:!0,render:function(e,t){var n=t.parent,a=r.components.button.option.native?r.components.defaultGroup:r.components.label,o=(0,r.elementOptions)(n,a),i=t.slots(),s=i.default?{component:i.default,option:r.option}:r.components.button;if(s.component instanceof Array)return e(a.component,o,s.component);var u=s.option.label||s.defaultOption.label,l=(0,r.elementOptions)(n,s,{type:"submit"});return s.option.native&&delete l.attrs.label,e(a.component,o,[e(s.component,l,u)])}}}])});