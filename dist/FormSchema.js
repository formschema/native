(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define("FormSchema",[],t):"object"===typeof exports?exports["FormSchema"]=t():e["FormSchema"]=t()})("undefined"!==typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s="iaYj")}({"03mN":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("QE+O");function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={functional:!0,render:function(e,t){var n=t.props,u=t.slots,l=(t.listeners,n.input),s=n.field,c=n.value,f=n.name,p=void 0===f?s.attrs.name:f,d=(0,r.argName)(l),m=o({},l.data[d],{name:p,value:"object"===a(c)?c[p]:c});return e(l.element.component,o({},l.data,i({},d,m)),u().default)}};t.default=u},"6Nfi":function(e,t,n){"use strict";function r(e){return i(e)||o(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function u(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var n=Object.keys(e);return n.length===Object.keys(t).length&&-1===n.findIndex(function(n){return!t.hasOwnProperty(n)||e[n]!==t[n]})}function c(e){return null===e||/string|number|boolean|undefined|function/.test(l(e))}function f(e,t){Object.keys(t).forEach(function(n){var a=t[n];c(a)?e[n]=a:u(a,Array)?e[n]=r(a):(e[n]||(e[n]={}),f(e[n],a))})}Object.defineProperty(t,"__esModule",{value:!0}),t.equals=s,t.isScalar=c,t.merge=f},Ma1Y:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("QE+O"),a=u(n("vUgH")),o=u(n("RWc7")),i=u(n("kHBZ"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return f(e)||c(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function f(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={functional:!0,render:function(e,t){var n=t.props,u=t.listeners,s=n.field,c=n.value,f=(0,r.input)({field:s,listeners:u}),d=[];switch(s.attrs.type){case"textarea":f.element.native&&(delete f.data.attrs.type,delete f.data.attrs.value,f.data.domProps.innerHTML=c);break;case"radio":s.hasOwnProperty("items")&&s.items.forEach(function(t){d.push(e(o.default,{fieldParent:s,props:{item:t,value:c,field:p({},s,{isArrayField:!1})},on:u}))});break;case"checkbox":if(s.hasOwnProperty("items"))s.items.forEach(function(t){d.push(e(o.default,{fieldParent:s,props:{item:t,value:c,field:s},on:u}))});else if("boolean"===s.schemaType){var m={label:s.label},y=!0===c;return e(o.default,{props:{item:m,value:c,field:s,checked:y},on:u})}break;case"select":var h=l(s.items);s.attrs.required&&h.unshift({label:null,value:""}),f.element.native&&(delete f.data.attrs.type,delete f.data.attrs.value),h.forEach(function(t){d.push(e(i.default,{props:{field:s,value:c,option:t}}))});break}return e(a.default,{props:{field:s,value:c,input:f}},d)}};t.default=m},MjSB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("QE+O"),a={functional:!0,render:function(e,t){var n=t.data,a=t.slots,o=a(),i=r.components.buttonswrapper;return o.default?e(i.component,n,o.default):e(i.component,[e(r.components.submitbutton.component,n)])}};t.default=a},"QE+O":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderFieldset=s,t.renderInput=c,t.set=p,t.init=d,t.argName=m,t.input=h,t.inputName=t.fieldTypesAsNotArray=t.groupedArrayTypes=t.renderButton=t.components=void 0;var r=n("6Nfi");function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var u={h1:["title"],p:["description"],div:["error","textgroup","buttonswrapper","formwrapper","inputswrapper","inputwrapper","defaultGroup"],legend:["legend"],fieldset:["radiogroup","checkboxgroup"],small:["inputdesc"],form:["form"],input:{typed:["checkbox","color","date","datetime","datetime-local","email","file","hidden","image","month","number","password","radio","range","search","tel","text","time","url","week"]},textarea:["textarea"],select:["select"],option:["option"],label:["label"],button:["submitbutton","arraybutton"]},l={};function s(e,t){var n=t.data,r=(t.props,t.slots),a=n.field.attrs.name,o=n.field.description,i=[e(l.inputswrapper.component,r().default)];return o&&(i.unshift(e(l.legend.component,o)),delete n.field.description),e("fieldset",{attrs:{name:a}},i)}function c(e,t){t.data;var n=t.props,r=t.slots,a=r().default||[],o=n.field;return o.description&&a.push(e(l.inputdesc.component,{props:{field:o}},o.description)),o.label?(a.unshift(e("span",{attrs:{"data-required-field":o.attrs.required?"true":"false"}},o.label)),e("label",a)):a.length>1?e("div",a):a[0]}t.components=l;var f=function(e,t){return function(n,r){var a=r.listeners;return n("button",{attrs:{type:e},on:a},t)}};function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"!==typeof t&&(t.functional=!0),l[e]={type:e,native:a,component:"string"===typeof t?{functional:!0,render:function(e,a){var o=a.data,i=a.slots,u=i().default||[];return n&&(0,r.merge)(o,n),0===u.length&&0===Object.keys(o).length?null:e(t,o,u)}}:t}}function d(){var e=function(e){delete l[e],i(u[e],Array)?u[e].forEach(function(t){return p(t,e,{},!0)}):u[e].typed.forEach(function(t){p(t,e,{attrs:{type:t}},!0)})};for(var t in u)e(t);l.radiogroup.component.render=s,l.checkboxgroup.component.render=s,l.inputwrapper.component.render=c,l.submitbutton.component.render=f("submit","Submit"),l.arraybutton.component.render=f("button","Add")}function m(e){return e.native?"attrs":"props"}t.renderButton=f;var y=["radio","checkbox","input","textarea"];function h(e){var t,n=e.field,r=e.fieldParent,i=void 0===r?null:r,u=e.listeners,s=void 0===u?{}:u,c=n.attrs.type,f=n.hasOwnProperty("items")&&y.includes(c)?l["".concat(c,"group")]||l.defaultGroup:l[c]||l.text,p=(t={field:n,fieldParent:i,attrs:{},props:{},domProps:{}},o(t,m(f),a({},n.attrs)),o(t,"on",s),t);return{element:f,data:p}}t.groupedArrayTypes=y;var b=["radio","textarea","select"];t.fieldTypesAsNotArray=b;var v=function(e,t){return"".concat(e.attrs.name,"-").concat(t)};t.inputName=v},RWc7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("QE+O"),a=o(n("vUgH"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var s={functional:!0,render:function(e,t){var n=t.props,o=t.listeners,u=n.item,s=n.field,c=n.value,f=n.checked,p=n.disableWrappingLabel,d=u.label,m=u.description,y={name:u.name||s.attrs.name,type:s.attrs.type,value:"boolean"===s.schemaType?void 0:u.value,checked:"undefined"===typeof f?l(c,Array)?c.includes(u.value):u.value===c:f},h=(0,r.input)({field:{label:d,description:m,attrs:y},fieldParent:s,listeners:o});return e(a.default,{props:{value:c,input:h,disableWrappingLabel:p,field:i({},s,{label:d,description:m})},on:h.data.listeners})}};t.default=s},SAX8:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setCommonFields=o,t.loadFields=i,t.parseBoolean=u,t.parseString=l,t.parseItems=s,t.arrayOrderedValues=f,t.arrayUnorderedValues=p,t.singleValue=d,t.parseArray=m,t.setItemName=void 0;var a=["anyOf","oneOf","enum"];function o(e,t){t.attrs.value=t.attrs.hasOwnProperty("value")?t.attrs.value:e.default||"",t.schemaType=e.type,t.label=e.title||"",t.description=e.description||"",t.attrs.required=e.required||!1,t.attrs.disabled=e.disabled||!1}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e&&!1!==e.visible)switch(e.type){case"object":for(var r in e.properties){if(e.required){var o=!0,s=!1,c=void 0;try{for(var f,p=e.required[Symbol.iterator]();!(o=(f=p.next()).done);o=!0){var d=f.value;e.properties[d].required=!0}}catch(e){s=!0,c=e}finally{try{o||null==p.return||p.return()}finally{if(s)throw c}}}i(e.properties[r],t,r)}break;case"boolean":t.push(u(e,n));break;case"array":t.push(m(e,n));break;case"integer":case"number":case"string":for(var y=0;y<a.length;y++){var h=a[y];if(e.hasOwnProperty(h))return e.items={type:e.type,enum:e[h]},void t.push(m(e,n))}t.push(l(e,n));break}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={attrs:e.attrs||{}};return o(e,n),n.attrs.type||(n.attrs.type="checkbox"),n.attrs.hasOwnProperty("checked")||(n.attrs.checked=!0===e.default),delete n.attrs.value,t&&(n.attrs.name=t),n}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={attrs:e.attrs||{}};if(e.pattern&&(n.attrs.pattern=e.pattern),e.format)switch(e.format){case"email":n.attrs.type||(n.attrs.type="email");break;case"uri":n.attrs.type||(n.attrs.type="url");break}if(!n.attrs.type)switch(e.type){case"number":case"integer":n.attrs.type="number";break;default:n.attrs.type="text"}return o(e,n),t&&(n.attrs.name=t),e.minLength&&(n.attrs.minlength=e.minLength),e.maxLength&&(n.attrs.maxlength=e.maxLength),n}function s(e){return e.map(function(e){return"object"!==r(e)?{value:e,label:e}:e})}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){return t&&(n.name=e),n.name||(n.name=e?"".concat(e,"-"):"",n.name+=n.label.replace(/\s+/g,"-")),e&&(n.ref="".concat(e,"-").concat(r)),n}};function f(e){return e.items.map(function(e){return e.checked?e.value:void 0})}function p(e){return e.items.filter(function(e){return e.checked||e.selected}).map(function(e){return e.value})}function d(e){var t=e.items.reverse().find(function(e){return e.checked||e.selected});return t?t.value:""}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={attrs:e.attrs||{}};o(e,n),t&&(n.attrs.name=t),n.items=[],n.minItems=parseInt(e.minItems)||1,n.maxItems=parseInt(e.maxItems)||1e3;e:for(var r=0;r<a.length;r++){var i=a[r];if(e.hasOwnProperty(i))switch(i){case"enum":n.attrs.type||(n.attrs.type="select"),n.items=s(e[i]),0===n.attrs.value.length&&(n.attrs.value="array"===n.schemaType?p(n):d(n));break e;case"oneOf":n.attrs.type="radio",n.attrs.value=n.attrs.value||"",n.items=s(e[i]).map(c(t,!0)),0===n.attrs.value.length&&(n.attrs.value=d(n));break e;case"anyOf":n.attrs.type="checkbox",n.attrs.value=n.attrs.value||[],n.items=s(e[i]).map(c(t)),n.isArrayField=!0,0===n.attrs.value.length&&(n.attrs.value=f(n));break e}}return n.attrs.type?"select"===n.attrs.type&&(n.attrs.multiple="array"===n.schemaType,n.attrs.value=n.attrs.value||n.attrs.multiple?[]:"",0===n.attrs.value.length&&(n.attrs.multiple?(n.isArrayField=!0,n.attrs.value=p(n)):n.attrs.value=d(n))):(n.isArrayField=!0,n.attrs.type="text"),n}t.setItemName=c},iaYj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("SAX8"),a=n("6Nfi"),o=n("QE+O"),i=l(n("Ma1Y")),u=l(n("MjSB"));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,o.init)();var c={name:"FormSchema",props:{schema:{type:Object,required:!0},value:{type:Object,default:function(){return{}}},action:{type:String},autocomplete:{type:String},enctype:{type:String,default:"application/x-www-form-urlencoded"},method:{type:String,default:"post"},novalidate:{type:Boolean}},data:function(){return{schemaLoaded:{schema:{},fields:[]},default:{},error:null,data:{},inputValues:{}}},created:function(){this.init(this.schema)},watch:{schema:function(e,t){(0,a.equals)(e,t)||this.init(e)}},render:function(e){var t=this,n=this.schemaLoaded,r=n.schema,a=n.fields,l=[];r.title&&l.push(e(o.components.title.component,r.title)),r.description&&l.push(e(o.components.description.component,r.description)),this.error&&l.push(e(o.components.error.component,this.error));var c,f=a.map(function(n){var r=t.data[n.attrs.name];return e(i.default,{props:{field:n,value:r},on:{input:function(e){var r=e.target,a=e.target.value,o={field:n,data:a,target:r};n.isArrayField?t.onInputArrayValue(o):t.onInput(o)},change:function(e){var r=e.target,a=e.target.value,o={field:n,data:a,target:r};n.isArrayField?t.onInputArrayValue(o,!1):t.onInput(o,!1),t.changed()}}})});f.length&&(f.push(e(u.default,this.$slots.default)),l.push(e(o.components.form.component,(c={ref:"__form"},s(c,(0,o.argName)(o.components.form),{action:this.action,enctype:this.enctype,method:this.method,autocomplete:this.autocomplete,novalidate:this.novalidate}),s(c,"on",{reset:this.reset,submit:this.submit,invalid:this.invalid}),c),f)));return e(o.components.formwrapper.component,l)},setComponent:o.set,methods:{init:function(e){var t=[];(0,r.loadFields)(e,t),this.loadDefaultValues(t),this.schemaLoaded={schema:e,fields:t}},loadDefaultValues:function(e){var t=this;this.default={},this.inputValues={},e.forEach(function(e){var n=e.attrs,r=n.type,a=n.name;t.default[a]="boolean"===e.schemaType?"boolean"===typeof t.value[a]?t.value[a]:!0===e.attrs.checked:t.value[a]||e.attrs.value,e.isArrayField&&(Array.isArray(t.default[a])?t.default[a]=t.default[a].filter(function(n,r){return t.inputValues[(0,o.inputName)(e,r)]=n,void 0!==n}):t.default[a]=[],e.itemsNum="checkbox"===r?e.items.length:e.minItems)});var n={};(0,a.merge)(n,this.default),this.data=n,this.$emit("input",this.data)},onInput:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"boolean"===e.field.schemaType&&(e.data=e.target.checked),this.data[e.field.attrs.name]=e.data,t&&this.$emit("input",this.data)},onInputArrayValue:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("checkbox"===e.field.attrs.type)if(e.target.checked)this.data[e.field.attrs.name].includes(e.data)||this.data[e.field.attrs.name].push(e.data);else{var n=this.data[e.field.attrs.name].indexOf(e.data);n>-1&&this.data[e.field.attrs.name].splice(n,1)}else{var r=e.target.getAttribute("data-fs-index"),a=(0,o.inputName)(e.field,r);this.inputValues[a]=e.data;for(var i=[],u=0;u<e.field.itemsNum;u++){var l=this.inputValues[(0,o.inputName)(e.field,u)];l&&i.push(l)}this.data[e.field.attrs.name]=i}t&&this.$emit("input",this.data)},changed:function(){(0,a.equals)(this.data,this.default)||this.$emit("change",this.data)},form:function(){return this.$refs.__form},reportValidity:function(){for(var e=this.form().elements,t=!0,n=0;n<e.length;n++)"checkValidity"in e[n]&&(t=t&&e[n].checkValidity());return t},checkValidity:function(){return this.reportValidity()},invalid:function(e){this.$emit("invalid",e)},reset:function(){var e=this;for(var t in this.inputValues)delete this.inputValues[t];this.schemaLoaded.fields.forEach(function(t){var n=t.attrs.name;e.$set(e.data,n,e.default[n]),t.isArrayField&&e.data[n].forEach(function(n,r){e.inputValues[(0,o.inputName)(t,r)]=n})})},submit:function(e){this.checkValidity()&&this.$emit("submit",e)},setErrorMessage:function(e){this.error=e},clearErrorMessage:function(){this.error=null}}};t.default=c},kHBZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("QE+O");function a(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var o={functional:!0,render:function(e,t){var n=t.props,o=n.option,i=n.value,u={label:o.label,attrs:{value:o.value,selected:a(i,Array)?i.includes(o.value):"undefined"===typeof i?o.selected||!1:o.value===i}},l=(0,r.input)({field:u}).data;return e(r.components.option.component,l,o.label)}};t.default=o},vUgH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("QE+O"),a=o(n("03mN"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={functional:!0,render:function(e,t){var n=t.props,o=t.slots,u=t.listeners,l=n.field,s=n.value,c=n.input,f=n.disableWrappingLabel,p=o().default||[];if(l.isArrayField&&"select"!==l.attrs.type){var d,m=l.attrs.name,y={props:{name:m,field:l,value:s,input:c},on:u};if("checkbox"===l.attrs.type)return e(r.components.inputwrapper.component,y,[e(a.default,y,p)]);var h=Array.apply(null,Array(l.itemsNum)).map(function(t,n){return y.props.name=(0,r.inputName)(l,n),c.data.attrs["data-fs-index"]=n,e(a.default,y,p)}),b=r.components.arraybutton,v=(d={},i(d,(0,r.argName)(b),{disabled:l.maxItems<=l.itemsNum}),i(d,"on",{click:function(){l.itemsNum<l.maxItems&&l.itemsNum++}}),d);return h.push(e(b.component,v)),e(r.components.inputwrapper.component,{props:{field:l}},[e(r.components.inputswrapper.component,{props:{field:l}},h)])}var g=[e(c.element.component,c.data,p)];return f?g:e(r.components.inputwrapper.component,{props:{field:l}},g)}};t.default=u}})["default"]});
//# sourceMappingURL=FormSchema.js.map